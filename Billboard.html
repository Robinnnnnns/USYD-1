<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Team Up</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@800;900&family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#F26B38;
      --primary-2:#FF8A5B;
      --bg:#F8F8F8;
      --card:#fff;
      --text:#1A1A1A;
      --muted:#666;
      --border:#E6E6E6;
      --shadow:0 8px 28px rgba(0,0,0,.10);
      --radius:16px;
      --trs:all .25s cubic-bezier(.4,0,.2,1);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Apple Color Emoji,Noto Color Emoji;}
    a{color:inherit}
    /* Topbar */
    .topbar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--border);z-index:20}
    .topbar-inner{max-width:1200px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;gap:14px}
    .search{flex:1;display:flex;align-items:center;gap:10px;border:1px solid var(--border);border-radius:999px;padding:10px 14px;background:#fff}
    .search input{flex:1;border:none;outline:none;font-size:1rem}
    .actions{display:flex;align-items:center;gap:10px;margin-left:auto}
    .seg{display:flex;border:1px solid var(--border);border-radius:999px;overflow:hidden}
    .seg button{padding:8px 12px;border:none;background:#fff;cursor:pointer;font-weight:800}
    .seg button.active{background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#fff}
    .pf{width:32px;height:32px;border-radius:50%;background:#FFE7DD;display:inline-flex;align-items:center;justify-content:center;font-weight:900;color:#B33E17;border:1px solid #FFD3C1}
    /* container */
    .wrap{max-width:1200px;margin:0 auto;padding:20px}
    .hero{margin:22px 0 12px}
    .hero h1{font-family:Merriweather,serif;font-weight:900;font-size:2.2rem;margin:0 0 6px}
    .hero p{color:var(--muted);margin:0}
    /* grid/list */
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
    .card{grid-column:span 4;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;cursor:pointer;transition:var(--trs);display:flex;flex-direction:column}
    .card:hover{transform:translateY(-4px)}
    .head{display:flex;gap:14px;align-items:center;padding:16px 16px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,#fff,#fffdfa)}
    .ava{width:54px;height:54px;border-radius:50%;background:#FFE7DD;border:2px solid #FFD3C1;display:flex;align-items:center;justify-content:center;font-weight:900;color:#B33E17;flex:none}
    .nm{font-weight:900}
    .tags{display:flex;flex-wrap:wrap;gap:8px;padding:12px 16px}
    .tag{padding:.35rem .7rem;border-radius:999px;border:1px solid var(--border);background:#fafafa;font-weight:700;font-size:.86rem}
    .foot{margin-top:auto;display:flex;gap:10px;justify-content:flex-end;padding:14px 16px;border-top:1px solid var(--border)}
    .btn-ghost{border:1px solid var(--border);border-radius:12px;background:#fff;padding:8px 12px;font-weight:800;cursor:pointer}
    .btn-pri{border:none;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--primary-2));color:#fff;padding:9px 14px;font-weight:800;cursor:pointer;box-shadow:0 8px 18px rgba(242,107,56,.25)}
    .fav[data-active="true"] .star path{fill:var(--primary)}
    /* list view */
    .list{display:none}
    .row{display:grid;grid-template-columns:60px 1.6fr 2fr auto;gap:12px;align-items:center;background:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px;box-shadow:var(--shadow);cursor:pointer}
    .row + .row{margin-top:12px}
    .row .tags{padding:0}
    .row .foot{border-top:none;margin:0;padding:0;gap:8px}
    .row .ava{width:46px;height:46px}
    /* modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;z-index:50}
    .modal.open{display:flex}
    .modal-card{width:min(560px,92vw);background:#fff;border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow);overflow:hidden}
    .modal-h{padding:16px 20px;border-bottom:1px solid var(--border);font-weight:900}
    .modal-b{padding:18px 20px;line-height:1.7}
    .modal-b .sec{margin:10px 0}
    .modal-f{padding:14px 20px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:10px}
    @media (max-width:1100px){.card{grid-column:span 6}}
    @media (max-width:720px){
      .grid{grid-template-columns:repeat(6,1fr)}
      .card{grid-column:span 6}
      .row{grid-template-columns:46px 1.2fr 1.6fr auto}
    }
  </style>
</head>
<body>
  <!-- Topbar -->
  <header class="topbar" role="banner">
    <div class="topbar-inner">
      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M21 21l-4.2-4.2" stroke="#999" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="7" stroke="#999" stroke-width="2" fill="none"/></svg>
        <input id="search" type="search" placeholder="Search names..." aria-label="Search names">
      </div>
      <div class="actions">
        <div class="seg" role="tablist" aria-label="layout switcher">
          <button id="btnCard" class="active" role="tab" aria-selected="true" aria-controls="view-card" title="Card view (P1)">Cards</button>
          <button id="btnList" role="tab" aria-selected="false" aria-controls="view-list" title="List view (P2)">List</button>
        </div>
        <!-- Static user avatar only (no link, no tooltip) -->
        <span class="pf" id="mePF"></span>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero" aria-live="polite">
      <h1>Let's team up</h1>
      <p>Find classmates by name. View their avatar and tags. Apply to team up or save favorites.</p>
    </section>

    <!-- Card view -->
    <section id="view-card" class="grid" aria-label="Card results">
      <!-- cards injected by JS -->
    </section>

    <!-- List view -->
    <section id="view-list" class="list" aria-label="List results">
      <!-- rows injected by JS -->
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card" role="document">
      <div class="modal-h" id="modalTitle">Profile</div>
      <div class="modal-b" id="modalBody"></div>
      <div class="modal-f">
        <button class="btn" id="modalClose">Close</button>
      </div>
    </div>
  </div>

  <script>
    // ----- Provided tag pool -----
    const TAG_POOL = [
      "empathetic","Adventurous","detail-oriented","open-minded","reflective","passionate",
      "Calm","collaborative",
      "Technical","research-driven","storyteller","conceptual thinker","strong communicator","hands-on maker",
      "fast learner","visual thinker",
      "Leader","Facilitator","Strategist","Motivator","Researcher","Innovator",
      "prototype builder","critic"
    ];

    // Random util: sample k unique items
    function sampleTags(k){
      const pool = [...TAG_POOL];
      for (let i = pool.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [pool[i], pool[j]] = [pool[j], pool[i]];
      }
      return pool.slice(0, k);
    }

    // Current user avatar initial (optional from localStorage)
    const myInitial = (localStorage.getItem('avatar_initial') || 'U').slice(0,1).toUpperCase();
    document.getElementById('mePF').textContent = myInitial;

    // Exactly 6 demo people (can be replaced by real data later)
    const people = [
      { id:'u1', name:'Alex Chen', initial:'A', desc:'Mixed-methods researcher. Diary study enjoyer.', portfolio:'', tags: sampleTags(4) },
      { id:'u2', name:'Bella Wu', initial:'B', desc:'Design systems & prototyping.', portfolio:'', tags: sampleTags(4) },
      { id:'u3', name:'Chris Li', initial:'C', desc:'Frontend dev. Accessibility advocate.', portfolio:'', tags: sampleTags(4) },
      { id:'u4', name:'Dylan Park', initial:'D', desc:'Motion & micro-interactions.', portfolio:'', tags: sampleTags(4) },
      { id:'u5', name:'Erin Zhao', initial:'E', desc:'Service design & facilitation.', portfolio:'', tags: sampleTags(4) },
      { id:'u6', name:'Felix Tran', initial:'F', desc:'Data viz & product thinking.', portfolio:'', tags: sampleTags(4) },
    ];

    // ----- State -----
    const state = {
      view:'card',
      keyword:'',
      favourites: JSON.parse(localStorage.getItem('favourites') || '[]')
    };

    // ----- DOM refs -----
    const searchEl = document.getElementById('search');
    const viewCardEl = document.getElementById('view-card');
    const viewListEl = document.getElementById('view-list');
    const btnCard = document.getElementById('btnCard');
    const btnList = document.getElementById('btnList');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');

    // ----- Helpers -----
    const isFav = id => state.favourites.includes(id);
    const toggleFav = id => {
      const i = state.favourites.indexOf(id);
      if (i === -1) state.favourites.push(id);
      else state.favourites.splice(i,1);
      localStorage.setItem('favourites', JSON.stringify(state.favourites));
      render();
    };
    const applyTo = (person) => alert(`Applied to team up with ${person.name}!`);
    const openProfile = (person) => {
      modalTitle.textContent = person.name;
      const hasURL = person.portfolio && person.portfolio.trim();
      modalBody.innerHTML = `
        <div class="sec"><strong>Description</strong><br>${person.desc || '—'}</div>
        <div class="sec"><strong>Portfolio</strong><br>${ hasURL ? `<a href="${person.portfolio}" target="_blank" rel="noopener">Visit portfolio</a>` : '—'}</div>
        <div class="sec"><strong>Tags</strong><br>${(person.tags||[]).map(t=>`<span class="tag">${t}</span>`).join(' ')}</div>
      `;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
    };
    const closeProfile = () => {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    };

    function filtered(){
      const q = state.keyword.trim().toLowerCase();
      if (!q) return people;
      return people.filter(p => p.name.toLowerCase().includes(q));
    }

    function personCard(p){
      const fav = isFav(p.id);
      const tags = (p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');
      return `
        <article class="card" data-id="${p.id}" role="button" tabindex="0" aria-label="${p.name}">
          <div class="head">
            <div class="ava">${p.initial}</div>
            <div><div class="nm">${p.name}</div></div>
          </div>
          <div class="tags">${tags}</div>
          <div class="foot" role="group" aria-label="actions" data-stop>
            <button class="btn-ghost fav" data-fav="${p.id}" aria-pressed="${fav}" title="Save">
              <span class="star">
                <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 17.3l-5.5 3 1-6.1L3 9.7l6.2-.9L12 3l2.8 5.8 6.2.9-4.5 4.5 1 6.1z" fill="${fav?'#F26B38':'none'}" stroke="#F26B38" stroke-width="1.5" />
                </svg>
              </span> Save
            </button>
            <button class="btn-pri" data-apply="${p.id}">Apply</button>
          </div>
        </article>
      `;
    }

    function personRow(p){
      const fav = isFav(p.id);
      const tags = (p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');
      return `
        <div class="row" data-id="${p.id}" role="button" tabindex="0" aria-label="${p.name}">
          <div class="ava">${p.initial}</div>
          <div class="nm">${p.name}</div>
          <div class="tags">${tags}</div>
          <div class="foot" role="group" aria-label="actions" data-stop>
            <button class="btn-ghost fav" data-fav="${p.id}" aria-pressed="${fav}" title="Save">
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 17.3l-5.5 3 1-6.1L3 9.7l6.2-.9L12 3l2.8 5.8 6.2.9-4.5 4.5 1 6.1z" fill="${fav?'#F26B38':'none'}" stroke="#F26B38" stroke-width="1.5" />
              </svg>
            </button>
            <button class="btn-pri" data-apply="${p.id}">Apply</button>
          </div>
        </div>
      `;
    }

    function render(){
      const items = filtered().slice(0, 6); // ensure at most 6 visible
      if (state.view === 'card'){
        viewCardEl.style.display = 'grid';
        viewListEl.style.display = 'none';
        viewCardEl.innerHTML = items.map(personCard).join('');
      }else{
        viewCardEl.style.display = 'none';
        viewListEl.style.display = 'block';
        viewListEl.innerHTML = items.map(personRow).join('');
      }
    }

    // Events
    document.addEventListener('click', (e)=>{
      const favBtn = e.target.closest('[data-fav]');
      const applyBtn = e.target.closest('[data-apply]');
      const stopArea = e.target.closest('[data-stop]');
      if (favBtn){ e.preventDefault(); e.stopPropagation(); toggleFav(favBtn.dataset.fav); return; }
      if (applyBtn){ e.preventDefault(); e.stopPropagation(); const p = people.find(x=>x.id===applyBtn.dataset.apply); if (p) applyTo(p); return; }
      const card = e.target.closest('.card, .row');
      if (card && !stopArea){
        const id = card.getAttribute('data-id');
        const p = people.find(x=>x.id===id);
        if (p) openProfile(p);
      }
    });
    document.getElementById('btnCard').addEventListener('click', ()=>{
      state.view='card';
      btnCard.classList.add('active'); btnList.classList.remove('active');
      btnCard.setAttribute('aria-selected','true'); btnList.setAttribute('aria-selected','false');
      render();
    });
    document.getElementById('btnList').addEventListener('click', ()=>{
      state.view='list';
      btnList.classList.add('active'); btnCard.classList.remove('active');
      btnList.setAttribute('aria-selected','true'); btnCard.setAttribute('aria-selected','false');
      render();
    });
    document.getElementById('search').addEventListener('input', (e)=>{
      state.keyword = e.target.value;
      render();
    });

    // Modal
    document.getElementById('modalClose').addEventListener('click', ()=>{
      closeProfile();
    });
    document.getElementById('modal').addEventListener('click', (e)=>{
      if (e.target.id === 'modal') closeProfile();
    });
    document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape') closeProfile(); });

    // First render
    render();
  </script>
</body>
</html>
